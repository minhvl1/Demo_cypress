image: cypress/browsers:node12.14.1-chrome85-ff81
stages:
  - Setup env and install dependencies
  - run testscript

Setup env and install dependencies:
  stage: Setup env and install dependencies
  script:
    # install dependencies
    - npm ci
    # start the server in the background
    - npm run start:ci &

run testscript:
  stage: run testscript
  script:
    # run Cypress tests
    - npx cypress run --record --key 84398296-b2b5-4882-bd9a-82b2a0cf1f28